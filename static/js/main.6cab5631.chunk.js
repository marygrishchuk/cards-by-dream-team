(this["webpackJsonpcards-by-dream-team"]=this["webpackJsonpcards-by-dream-team"]||[]).push([[0],{12:function(e,t,r){e.exports={header:"Header_header__10VB5",active:"Header_active__3B1Kt"}},18:function(e,t,r){e.exports={login:"Login_login__2ck6i"}},22:function(e,t,r){e.exports={forgot:"Forgot_forgot__3iT7N"}},25:function(e,t,r){e.exports={register:"Register_register__298wP"}},26:function(e,t,r){e.exports={setPassword:"SetPassword_setPassword__ji0HF"}},36:function(e,t,r){e.exports={profile:"Profile_profile__OylV9"}},42:function(e,t,r){},43:function(e,t,r){},68:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(16),c=r.n(s),a=(r(42),r(43),r(3)),o=r(14),i=r(22),u=r.n(i),d=r(5),j=r(11),l=r(4),b=r(35),O=r.n(b).a.create({withCredentials:!0,baseURL:"https://neko-back.herokuapp.com/2.0/"}),f=function(){return O.delete("auth/me")},h=function(e){return O.post("auth/forgot",{email:e,from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">\n                 password recovery link:\n                 <a href='http://marygrishchuk.github.io/cards-by-dream-team/#/set-new-password/$token$'>\n                 Reset Password</a></div>"})},p=function(e){return O.post("auth/set-new-password",e)},g={requestStatus:"idle",error:"",info:""},S=function(e){return{type:"FORGOT/SET-REQUEST-STATUS",requestStatus:e}},x=r(1),v=function(){var e=Object(j.c)((function(e){return e.forgot})),t=e.requestStatus,r=e.error,s=e.info,c=Object(j.b)(),a=Object(n.useState)(""),i=Object(o.a)(a,2),l=i[0],b=i[1];return Object(x.jsxs)("div",{className:u.a.forgot,children:["Please enter your email, and we'll send you a link to reset your password.",s&&Object(x.jsx)("i",{children:s}),r&&Object(x.jsx)("div",{style:{color:"red"},children:r}),Object(x.jsx)("input",{type:"email",value:l,onChange:function(e){b(e.currentTarget.value.trim())}}),Object(x.jsx)("button",{onClick:function(){c(function(e){return function(t){t(S("loading")),h(e).then((function(e){t({type:"FORGOT/SET-INFO",info:e.data.info}),t(S("success"))})).catch((function(e){var r=e.response?e.response.data.error:e.message+", more details in the console";t(function(e){return{type:"FORGOT/SET-ERROR",error:e}}(r)),t(S("failed"))}))}}(l))},disabled:"loading"===t,children:"Send"}),Object(x.jsx)(d.b,{to:"/login",activeClassName:u.a.active,children:"Log in"})]})},T=r(18),m=r.n(T),E=function(){return Object(x.jsxs)("div",{className:m.a.login,children:["Log In",Object(x.jsx)("input",{type:"email"}),Object(x.jsx)("input",{type:"password"}),Object(x.jsx)(d.b,{to:"/forgot",activeClassName:m.a.active,children:"Forgot password?"}),Object(x.jsxs)("label",{children:[Object(x.jsx)("input",{type:"checkbox"}),"Remember Me"]}),Object(x.jsx)("button",{children:"Log in"}),Object(x.jsx)(d.b,{to:"/register",activeClassName:m.a.active,children:"Registration"})]})},R=r(25),y=r.n(R),w=function(){return Object(x.jsxs)("div",{className:y.a.register,children:["Register",Object(x.jsx)("input",{type:"email"}),Object(x.jsx)("input",{type:"password"}),Object(x.jsx)("input",{type:"password"}),Object(x.jsx)("button",{children:"Register"}),Object(x.jsx)(d.b,{to:"/login",activeClassName:y.a.active,children:"Log in"})]})},A=r(26),P=r.n(A),N={requestStatus:"idle",error:"",info:""},U=function(e){return{type:"SET-PASSWORD/SET-REQUEST-STATUS",requestStatus:e}},_=function(){var e=Object(j.c)((function(e){return e.setPassword})),t=e.requestStatus,r=e.error,s=e.info,c=Object(j.b)(),i=Object(a.g)().token,u=Object(n.useState)(""),l=Object(o.a)(u,2),b=l[0],O=l[1],f=Object(n.useState)(""),h=Object(o.a)(f,2),g=h[0],S=h[1],v=Object(n.useState)(""),T=Object(o.a)(v,2),m=T[0],E=T[1];return Object(x.jsxs)("div",{className:P.a.setPassword,children:["Please enter your new password in each field.",s&&Object(x.jsx)("i",{children:s}),r&&Object(x.jsx)("div",{style:{color:"red"},children:r}),m&&Object(x.jsx)("div",{style:{color:"red"},children:m}),Object(x.jsx)("input",{type:"password",value:b,onChange:function(e){O(e.currentTarget.value)},onKeyPress:function(){return E("")}}),Object(x.jsx)("input",{type:"password",value:g,onChange:function(e){S(e.currentTarget.value)},onKeyPress:function(){return E("")}}),Object(x.jsx)("button",{onClick:function(){var e,t;b===g?c((e=b,t=i,function(r){r(U("loading")),p({password:e,resetPasswordToken:t}).then((function(e){r({type:"SET-PASSWORD/SET-INFO",info:e.data.info}),r(U("success"))})).catch((function(e){var t=e.response?e.response.data.error:e.message+", more details in the console";r(function(e){return{type:"SET-PASSWORD/SET-ERROR",error:e}}(t)),r(U("failed"))}))})):E("Passwords don't match.")},disabled:"loading"===t,children:"Submit"}),Object(x.jsx)(d.b,{to:"/login",activeClassName:P.a.active,children:"Log in"})]})},C=r(36),F=r.n(C),k={_id:"",email:"",name:"",error:"",isLoggedIn:!1,requestStatus:"idle"},q=function(e){return{type:"AUTH/SET-REQUEST-STATUS",requestStatus:e}},L=function(){var e=Object(j.c)((function(e){return e.auth})),t=e.email,r=e.name,n=e.error,s=e.isLoggedIn,c=e.requestStatus,o=Object(j.b)();return s?Object(x.jsxs)("div",{className:F.a.profile,children:["Welcome!",n&&Object(x.jsx)("div",{style:{color:"red"},children:n}),Object(x.jsx)("div",{children:r}),Object(x.jsx)("div",{children:t}),Object(x.jsx)("button",{onClick:function(){o((function(e){e(q("loading")),f().then((function(){e({type:"AUTH/SET-AUTH-USER-DATA",payload:{_id:"",email:"",name:"",isLoggedIn:!1}}),e(q("success"))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(function(e){return{type:"AUTH/SET-ERROR",error:e}}(r)),e(q("failed"))}))}))},disabled:"loading"===c,children:"Log out"})]}):Object(x.jsx)(a.a,{to:"/login"})},H=r(12),D=r.n(H),I=function(){return Object(x.jsxs)("div",{className:D.a.header,children:[Object(x.jsx)(d.b,{to:"/login",activeClassName:D.a.active,children:"Login"}),Object(x.jsx)(d.b,{to:"/register",activeClassName:D.a.active,children:"Register"}),Object(x.jsx)(d.b,{to:"/forgot",activeClassName:D.a.active,children:"Forgot"}),Object(x.jsx)(d.b,{to:"/set-new-password",activeClassName:D.a.active,children:"Set New Password"}),Object(x.jsx)(d.b,{to:"/profile",activeClassName:D.a.active,children:"Profile"})]})},G=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(I,{}),Object(x.jsxs)(a.d,{children:[Object(x.jsx)(a.b,{exact:!0,path:["/","/login"],render:function(){return Object(x.jsx)(E,{})}}),Object(x.jsx)(a.b,{path:"/register",render:function(){return Object(x.jsx)(w,{})}}),Object(x.jsx)(a.b,{path:"/forgot",render:function(){return Object(x.jsx)(v,{})}}),Object(x.jsx)(a.b,{path:"/set-new-password/:token?",render:function(){return Object(x.jsx)(_,{})}}),Object(x.jsx)(a.b,{path:"/profile",render:function(){return Object(x.jsx)(L,{})}}),Object(x.jsx)(a.b,{path:"/404",render:function(){return Object(x.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(x.jsx)(a.a,{from:"*",to:"/404"})]})]})},W=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,69)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;r(e),n(e),s(e),c(e),a(e)}))},Q=r(19),B=r(37),K={},J={},V=Object(Q.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET-AUTH-USER-DATA":return Object(l.a)(Object(l.a)({},e),t.payload);case"AUTH/SET-REQUEST-STATUS":return Object(l.a)(Object(l.a)({},e),{},{requestStatus:t.requestStatus});case"AUTH/SET-ERROR":return Object(l.a)(Object(l.a)({},e),{},{error:t.error});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;return t.type,e},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT/SET-REQUEST-STATUS":return Object(l.a)(Object(l.a)({},e),{},{requestStatus:t.requestStatus});case"FORGOT/SET-ERROR":return Object(l.a)(Object(l.a)({},e),{},{error:t.error,info:""});case"FORGOT/SET-INFO":return Object(l.a)(Object(l.a)({},e),{},{info:t.info,error:""});default:return e}},setPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PASSWORD/SET-REQUEST-STATUS":return Object(l.a)(Object(l.a)({},e),{},{requestStatus:t.requestStatus});case"SET-PASSWORD/SET-ERROR":return Object(l.a)(Object(l.a)({},e),{},{error:t.error,info:""});case"SET-PASSWORD/SET-INFO":return Object(l.a)(Object(l.a)({},e),{},{info:t.info,error:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),$=Object(Q.c)(V,Object(Q.a)(B.a));window.store=$,c.a.render(Object(x.jsx)(j.a,{store:$,children:Object(x.jsx)(d.a,{children:Object(x.jsx)(G,{})})}),document.getElementById("root")),W()}},[[68,1,2]]]);
//# sourceMappingURL=main.6cab5631.chunk.js.map