(this["webpackJsonpcards-by-dream-team"]=this["webpackJsonpcards-by-dream-team"]||[]).push([[0],{17:function(e,t,r){e.exports={header:"Header_header__10VB5",active:"Header_active__3B1Kt"}},20:function(e,t,r){e.exports={login:"Login_login__2ck6i",error:"Login_error__1oq8R"}},28:function(e,t,r){e.exports={forgot:"Forgot_forgot__3iT7N"}},31:function(e,t,r){e.exports={register:"Register_register__298wP"}},32:function(e,t,r){e.exports={setPassword:"SetPassword_setPassword__ji0HF"}},45:function(e,t,r){e.exports={profile:"Profile_profile__OylV9"}},52:function(e,t,r){},53:function(e,t,r){},77:function(e,t,r){"use strict";r.r(t);var n=r(0),s=r(21),a=r.n(s),o=(r(52),r(53),r(4)),c=r(19),i=r(28),u=r.n(i),l=r(6),d=r(8),j=r(3),b=r(42),O=r.n(b).a.create({withCredentials:!0,baseURL:"https://neko-back.herokuapp.com/2.0/"}),f=function(){return O.post("auth/me")},h=function(e){return O.post("auth/login",e)},g=function(){return O.delete("auth/me")},p=function(e){return O.post("auth/forgot",{email:e,from:"test-front-admin <ai73a@yandex.by>",message:"<div style=\"background-color: lime; padding: 15px\">\n                 password recovery link:\n                 <a href='http://marygrishchuk.github.io/cards-by-dream-team/#/set-new-password/$token$'>\n                 Reset Password</a></div>"})},S=function(e){return O.post("auth/set-new-password",e)},m={requestStatus:"idle",error:"",info:""},v=function(e){return{type:"FORGOT/SET-REQUEST-STATUS",requestStatus:e}},x=r(1),T=function(){var e=Object(d.c)((function(e){return e.forgot})),t=e.requestStatus,r=e.error,s=e.info,a=Object(d.b)(),o=Object(n.useState)(""),i=Object(c.a)(o,2),j=i[0],b=i[1];return Object(x.jsxs)("div",{className:u.a.forgot,children:["Please enter your email, and we'll send you a link to reset your password.","loading"===t?Object(x.jsx)("div",{style:{color:"green"},children:"loading..."}):s&&Object(x.jsx)("i",{children:s}),r&&Object(x.jsx)("div",{style:{color:"red"},children:r}),Object(x.jsx)("input",{type:"email",value:j,onChange:function(e){b(e.currentTarget.value.trim())}}),Object(x.jsx)("button",{onClick:function(){a(function(e){return function(t){t(v("loading")),p(e).then((function(e){t({type:"FORGOT/SET-INFO",info:e.data.info}),t(v("success"))})).catch((function(e){var r=e.response?e.response.data.error:e.message+", more details in the console";t(function(e){return{type:"FORGOT/SET-ERROR",error:e}}(r)),t(v("failed"))}))}}(j))},disabled:"loading"===t,children:"Send"}),Object(x.jsx)(l.b,{to:"/login",activeClassName:u.a.active,children:"Log in"})]})},E=r(20),y=r.n(E),w=r(47),R={_id:"",email:"",name:"",error:"",isLoggedIn:!1,requestStatus:"idle"},P=function(e,t,r,n){return{type:"AUTH/SET-AUTH-USER-DATA",payload:{_id:e,email:t,name:r,isLoggedIn:n}}},N=function(e){return{type:"AUTH/SET-REQUEST-STATUS",requestStatus:e}},_=function(e){return{type:"AUTH/SET-ERROR",error:e}},A=function(){var e=Object(d.b)(),t=Object(d.c)((function(e){return e.auth.isLoggedIn})),r=Object(w.a)({validate:function(e){return e.email?e.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var r;e((r=t,function(e){e(N("loading")),h(r).then((function(){e({type:"login/SET-IS-LOGGED-IN",value:!0}),e(N("success"))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(_(r)),e(N("failed"))}))}))}});return t?Object(x.jsx)(o.a,{to:"/profile"}):Object(x.jsx)("form",{onSubmit:r.handleSubmit,children:Object(x.jsxs)("div",{className:y.a.login,children:[Object(x.jsx)("label",{children:"Email"}),Object(x.jsx)("input",Object(j.a)({type:"email"},r.getFieldProps("email"))),r.errors.email?Object(x.jsx)("div",{className:y.a.error,children:r.errors.email}):null,Object(x.jsx)("label",{children:"Password"}),Object(x.jsx)("input",Object(j.a)({type:"password"},r.getFieldProps("password"))),r.errors.password?Object(x.jsx)("div",{className:y.a.error,children:r.errors.password}):null,Object(x.jsx)(l.b,{to:"/forgot",activeClassName:y.a.active,children:"Forgot password?"}),Object(x.jsxs)("label",{children:["Remember Me",Object(x.jsx)("input",Object(j.a)(Object(j.a)({type:"checkbox"},r.getFieldProps("rememberMe")),{},{checked:r.values.rememberMe}))]}),Object(x.jsx)("button",{type:"submit",color:"primary",children:"Login"}),Object(x.jsx)(l.b,{to:"/register",activeClassName:y.a.active,children:"Registration"})]})})},U=r(31),F=r.n(U),C=function(){return Object(x.jsxs)("div",{className:F.a.register,children:["Register",Object(x.jsx)("input",{type:"email"}),Object(x.jsx)("input",{type:"password"}),Object(x.jsx)("input",{type:"password"}),Object(x.jsx)("button",{children:"Register"}),Object(x.jsx)(l.b,{to:"/login",activeClassName:F.a.active,children:"Log in"})]})},k=r(32),q=r.n(k),L={requestStatus:"idle",error:"",info:""},I=function(e){return{type:"SET-PASSWORD/SET-REQUEST-STATUS",requestStatus:e}},D=function(){var e=Object(d.c)((function(e){return e.setPassword})),t=e.requestStatus,r=e.error,s=e.info,a=Object(d.b)(),i=Object(o.g)().token,u=Object(n.useState)(""),j=Object(c.a)(u,2),b=j[0],O=j[1],f=Object(n.useState)(""),h=Object(c.a)(f,2),g=h[0],p=h[1],m=Object(n.useState)(""),v=Object(c.a)(m,2),T=v[0],E=v[1];return"success"===t?Object(x.jsx)(o.a,{to:"/login"}):Object(x.jsxs)("div",{className:q.a.setPassword,children:["Please enter your new password in each field.","loading"===t?Object(x.jsx)("div",{style:{color:"green"},children:"loading..."}):s&&Object(x.jsx)("i",{children:s}),r&&Object(x.jsx)("div",{style:{color:"red"},children:r}),T&&Object(x.jsx)("div",{style:{color:"red"},children:T}),Object(x.jsx)("input",{type:"password",value:b,onChange:function(e){O(e.currentTarget.value)},onKeyPress:function(){return E("")}}),Object(x.jsx)("input",{type:"password",value:g,onChange:function(e){p(e.currentTarget.value)},onKeyPress:function(){return E("")}}),Object(x.jsx)("button",{onClick:function(){var e,t;b===g?a((e=b,t=i,function(r){r(I("loading")),S({password:e,resetPasswordToken:t}).then((function(e){r({type:"SET-PASSWORD/SET-INFO",info:e.data.info}),r(I("success"))})).catch((function(e){var t=e.response?e.response.data.error:e.message+", more details in the console";r(function(e){return{type:"SET-PASSWORD/SET-ERROR",error:e}}(t)),r(I("failed"))}))})):E("Passwords don't match.")},disabled:"loading"===t,children:"Submit"}),Object(x.jsx)(l.b,{to:"/login",activeClassName:q.a.active,children:"Log in"})]})},G=r(45),H=r.n(G),W=function(){var e=Object(d.c)((function(e){return e.auth})),t=e.email,r=e.name,s=e.error,a=e.isLoggedIn,c=e.requestStatus,i=Object(d.b)();Object(n.useEffect)((function(){a||i((function(e){e(N("loading")),f().then((function(t){e(P(t.data._id,t.data.email,t.data.name,!0)),e(N("success"))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(_(r)),e(N("failed"))}))}))}),[]);return a?Object(x.jsxs)("div",{className:H.a.profile,children:["Welcome!","loading"===c&&Object(x.jsx)("div",{style:{color:"green"},children:"loading..."}),s&&Object(x.jsx)("div",{style:{color:"red"},children:s}),Object(x.jsx)("div",{children:r}),Object(x.jsx)("div",{children:t}),Object(x.jsx)("button",{onClick:function(){i((function(e){e(N("loading")),g().then((function(){e(P("","","",!1)),e(N("success"))})).catch((function(t){var r=t.response?t.response.data.error:t.message+", more details in the console";e(_(r)),e(N("failed"))}))}))},disabled:"loading"===c,children:"Log out"})]}):Object(x.jsx)(o.a,{to:"/login"})},Q=r(17),B=r.n(Q),M=function(){return Object(x.jsxs)("div",{className:B.a.header,children:[Object(x.jsx)(l.b,{to:"/login",activeClassName:B.a.active,children:"Login"}),Object(x.jsx)(l.b,{to:"/register",activeClassName:B.a.active,children:"Register"}),Object(x.jsx)(l.b,{to:"/forgot",activeClassName:B.a.active,children:"Forgot"}),Object(x.jsx)(l.b,{to:"/set-new-password",activeClassName:B.a.active,children:"Set New Password"}),Object(x.jsx)(l.b,{to:"/profile",activeClassName:B.a.active,children:"Profile"})]})},K=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(M,{}),Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{exact:!0,path:["/","/login"],render:function(){return Object(x.jsx)(A,{})}}),Object(x.jsx)(o.b,{path:"/register",render:function(){return Object(x.jsx)(C,{})}}),Object(x.jsx)(o.b,{path:"/forgot",render:function(){return Object(x.jsx)(T,{})}}),Object(x.jsx)(o.b,{path:"/set-new-password/:token?",render:function(){return Object(x.jsx)(D,{})}}),Object(x.jsx)(o.b,{path:"/profile",render:function(){return Object(x.jsx)(W,{})}}),Object(x.jsx)(o.b,{path:"/404",render:function(){return Object(x.jsx)("h1",{children:"404: PAGE NOT FOUND"})}}),Object(x.jsx)(o.a,{from:"*",to:"/404"})]})]})},V=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,78)).then((function(t){var r=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),s(e),a(e),o(e)}))},J=r(25),$=r(46),z={},X={},Y=Object(J.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH/SET-AUTH-USER-DATA":return Object(j.a)(Object(j.a)({},e),t.payload);case"AUTH/SET-REQUEST-STATUS":return Object(j.a)(Object(j.a)({},e),{},{requestStatus:t.requestStatus});case"AUTH/SET-ERROR":return Object(j.a)(Object(j.a)({},e),{},{error:t.error});case"login/SET-IS-LOGGED-IN":return Object(j.a)(Object(j.a)({},e),{},{isLoggedIn:t.value});default:return e}},register:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;return t.type,e},forgot:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FORGOT/SET-REQUEST-STATUS":return Object(j.a)(Object(j.a)({},e),{},{requestStatus:t.requestStatus});case"FORGOT/SET-ERROR":return Object(j.a)(Object(j.a)({},e),{},{error:t.error,info:""});case"FORGOT/SET-INFO":return Object(j.a)(Object(j.a)({},e),{},{info:t.info,error:""});default:return e}},setPassword:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET-PASSWORD/SET-REQUEST-STATUS":return Object(j.a)(Object(j.a)({},e),{},{requestStatus:t.requestStatus});case"SET-PASSWORD/SET-ERROR":return Object(j.a)(Object(j.a)({},e),{},{error:t.error,info:""});case"SET-PASSWORD/SET-INFO":return Object(j.a)(Object(j.a)({},e),{},{info:t.info,error:""});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;return t.type,e}}),Z=Object(J.c)(Y,Object(J.a)($.a));window.store=Z,a.a.render(Object(x.jsx)(d.a,{store:Z,children:Object(x.jsx)(l.a,{children:Object(x.jsx)(K,{})})}),document.getElementById("root")),V()}},[[77,1,2]]]);
//# sourceMappingURL=main.cbd63142.chunk.js.map